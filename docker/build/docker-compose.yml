x-args-defaults:
  &args-defaults
  UID: 1000
  GID: 1000
  TAG: base
  NUM_THREADS: 8
  DISTRO: humble
  http_proxy: ""
  https_proxy: ""

x-build-defaults:
 &build-defaults
  context: .
  dockerfile: Dockerfile
  # additional_contexts:
  #   src_ctx: ../workspace
  args:
    <<: *args-defaults

services:
  amcl:
    image: humble/amcl:ros2
    build:
      <<: *build-defaults
      args:
        <<: *args-defaults
        CONTAINER_NAME: amcl
      target: amcl-release

  nav_stack:
    image: humble/nav_stack:ros2
    build:
      <<: *build-defaults
      args:
        <<: *args-defaults
        CONTAINER_NAME: nav_stack
      target: nav-stack-release

  rtabmap:
    image: humble/rtabmap_ros:ros2
    build:
      <<: *build-defaults
      args:
        <<: *args-defaults
        CONTAINER_NAME: rtabmap_ros
      target: rtabmap-ros-release

  slam_toolbox:
    image: humble/slam_toolbox:ros2
    build:
      <<: *build-defaults
      args:
        <<: *args-defaults
        CONTAINER_NAME: slam_toolbox
      target: slam-toolbox-release

  map_server:
    image: humble/map_server:base
    build:
      <<: *build-defaults
      args:
        <<: *args-defaults
        CONTAINER_NAME: map_server
      target: map-server-release